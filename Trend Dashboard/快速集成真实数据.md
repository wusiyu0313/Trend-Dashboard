# 🚀 快速集成真实数据指南

## 📝 概述

本指南将帮助您快速集成真实API，获取实时趋势数据。我已经更新了所有API路由文件，添加了真实API调用的代码。

---

## ✅ 第一步：微博热搜（最简单，推荐先试这个）

**微博热搜已经可以直接使用！** 代码已经更新，会自动尝试调用微博的公开接口。

### 测试步骤：

1. 确保服务器正在运行
2. 访问：http://localhost:3000/api/weibo
3. 查看返回的数据

如果返回的是真实数据，说明集成成功！如果返回模拟数据，可能是网络问题或接口变更。

---

## 🔧 第二步：配置其他平台的API密钥

### 1. 创建环境变量文件

```bash
# 在项目根目录创建 .env.local 文件
# Windows PowerShell:
Copy-Item .env.example .env.local

# 或手动创建文件，复制 .env.example 的内容
```

### 2. 获取API密钥

#### Twitter/X API（推荐）

1. 访问：https://developer.twitter.com/
2. 注册开发者账号
3. 创建应用
4. 获取 Bearer Token
5. 将Token填入 `.env.local`：

```env
TWITTER_BEARER_TOKEN=你的Bearer_Token
```

#### TikTok API

1. 访问：https://developers.tiktok.com/
2. 申请 Research API 访问权限
3. 获取 Access Token
4. 填入 `.env.local`：

```env
TIKTOK_ACCESS_TOKEN=你的Access_Token
```

#### 抖音热榜（第三方服务）

可以使用第三方API服务，如：
- HotList API
- 或其他提供抖音热榜数据的服务

填入 `.env.local`：

```env
HOTLIST_API_KEY=你的API密钥
```

### 3. 重启服务器

修改环境变量后，需要重启开发服务器：

```bash
# 停止当前服务器（Ctrl+C）
# 然后重新启动
npm run dev
```

---

## 🧪 测试API

### 方法1：直接在浏览器测试

访问各个API端点：
- http://localhost:3000/api/weibo
- http://localhost:3000/api/google-trends
- http://localhost:3000/api/x-trending
- http://localhost:3000/api/douyin
- http://localhost:3000/api/tiktok

查看返回的JSON数据，确认格式是否正确。

### 方法2：查看浏览器控制台

打开浏览器开发者工具（F12），查看Network标签，检查API请求是否成功。

---

## 📊 数据格式说明

所有API都应该返回以下格式的数据：

```json
{
  "items": [
    {
      "id": "唯一ID",
      "title": "趋势标题",
      "description": "描述（可选）",
      "rank": 1,
      "change": "up|down|same",
      "url": "链接地址"
    }
  ]
}
```

---

## 🔄 降级机制

所有API路由都实现了**降级机制**：

1. **优先尝试真实API**：如果配置了API密钥，会先尝试调用真实API
2. **自动降级**：如果API调用失败，会自动返回模拟数据
3. **确保可用性**：即使API失败，看板仍然可以正常显示

---

## 💡 推荐集成顺序

1. ✅ **微博热搜** - 最简单，公开接口，无需API密钥
2. 🔍 **Google Trends** - 使用RSS Feed，无需API密钥
3. 🐦 **Twitter/X** - 需要API密钥，但免费层可用
4. 🎵 **抖音热榜** - 需要第三方API服务
5. 🎬 **TikTok** - 需要申请Research API权限

---

## ⚠️ 常见问题

### Q: API返回401错误？
A: 检查API密钥是否正确，是否已过期。

### Q: API返回403错误？
A: 可能是API权限不足，检查申请的API权限范围。

### Q: API返回429错误？
A: 请求频率过高，需要降低请求频率或升级API套餐。

### Q: CORS错误？
A: 某些API可能需要在服务器端调用，不能直接从浏览器调用。

### Q: 数据格式不匹配？
A: 检查API返回的数据格式，可能需要调整数据处理逻辑。

---

## 📚 更多信息

查看 `API集成指南.md` 获取更详细的说明和更多API选项。

---

## 🎉 完成！

集成完成后，您的Trend Dashboard将显示真实的实时趋势数据！

如有问题，请查看：
1. `API集成指南.md` - 详细的API说明
2. `app/api/` 目录下的代码注释
3. 浏览器控制台的错误信息

